{"version":3,"mappings":"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","names":["CalendarHeaderComponent","_angular_core__WEBPACK_IMPORTED_MODULE_0__","angular_calendar__WEBPACK_IMPORTED_MODULE_1__","selectors","inputs","view","viewDate","locale","outputs","viewChange","viewDateChange","decls","vars","consts","template","ctx","DemoUtilsModule","_angular_common__WEBPACK_IMPORTED_MODULE_1__","_angular_forms__WEBPACK_IMPORTED_MODULE_2__","angular_calendar__WEBPACK_IMPORTED_MODULE_3__","declarations","_calendar_header_component__WEBPACK_IMPORTED_MODULE_4__","imports","exports","floorToNearest","amount","precision","Math","floor","ceilToNearest","ceil","CustomEventTitleFormatter","event","title","meta","tmpEvent","t","factory","DemoComponent","cdr","Date","segment","mouseDownEvent","segmentElement","dragToSelectEvent","id","events","length","start","date","segmentPosition","getBoundingClientRect","dragToCreateActive","endOfView","weekStartsOn","document","pipe","refresh","subscribe","mouseMoveEvent","minutesDiff","clientY","top","daysDiff","clientX","left","width","newEnd","end","detectChanges","features","provide","useClass","_r0","DemoModule","angular_calendar__WEBPACK_IMPORTED_MODULE_2__","useFactory","angular_calendar_date_adapters_date_fns__WEBPACK_IMPORTED_MODULE_4__","_demo_utils_module__WEBPACK_IMPORTED_MODULE_5__","_angular_router__WEBPACK_IMPORTED_MODULE_6__","path","component","_component__WEBPACK_IMPORTED_MODULE_7__"],"sources":["webpack:///projects/demos/app/demo-modules/demo-utils/calendar-header.component.ts","webpack:///projects/demos/app/demo-modules/demo-utils/module.ts","webpack:///projects/demos/app/demo-modules/drag-to-create-events/template.html","webpack:///projects/demos/app/demo-modules/drag-to-create-events/component.ts","webpack:///projects/demos/app/demo-modules/drag-to-create-events/module.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { CalendarView } from 'angular-calendar';\n\n@Component({\n  selector: 'mwl-demo-utils-calendar-header',\n  template: `\n    <div class=\"row text-center\">\n      <div class=\"col-md-4\">\n        <div class=\"btn-group\">\n          <div\n            class=\"btn btn-primary\"\n            mwlCalendarPreviousView\n            [view]=\"view\"\n            [(viewDate)]=\"viewDate\"\n            (viewDateChange)=\"viewDateChange.next(viewDate)\"\n          >\n            Previous\n          </div>\n          <div\n            class=\"btn btn-outline-secondary\"\n            mwlCalendarToday\n            [(viewDate)]=\"viewDate\"\n            (viewDateChange)=\"viewDateChange.next(viewDate)\"\n          >\n            Today\n          </div>\n          <div\n            class=\"btn btn-primary\"\n            mwlCalendarNextView\n            [view]=\"view\"\n            [(viewDate)]=\"viewDate\"\n            (viewDateChange)=\"viewDateChange.next(viewDate)\"\n          >\n            Next\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-4\">\n        <h3>{{ viewDate | calendarDate: view + 'ViewTitle':locale }}</h3>\n      </div>\n      <div class=\"col-md-4\">\n        <div class=\"btn-group\">\n          <div\n            class=\"btn btn-primary\"\n            (click)=\"viewChange.emit(CalendarView.Month)\"\n            [class.active]=\"view === CalendarView.Month\"\n          >\n            Month\n          </div>\n          <div\n            class=\"btn btn-primary\"\n            (click)=\"viewChange.emit(CalendarView.Week)\"\n            [class.active]=\"view === CalendarView.Week\"\n          >\n            Week\n          </div>\n          <div\n            class=\"btn btn-primary\"\n            (click)=\"viewChange.emit(CalendarView.Day)\"\n            [class.active]=\"view === CalendarView.Day\"\n          >\n            Day\n          </div>\n        </div>\n      </div>\n    </div>\n    <br />\n  `,\n})\nexport class CalendarHeaderComponent {\n  @Input() view: CalendarView;\n\n  @Input() viewDate: Date;\n\n  @Input() locale: string = 'en';\n\n  @Output() viewChange = new EventEmitter<CalendarView>();\n\n  @Output() viewDateChange = new EventEmitter<Date>();\n\n  CalendarView = CalendarView;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { CalendarModule } from 'angular-calendar';\nimport { CalendarHeaderComponent } from './calendar-header.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, CalendarModule],\n  declarations: [CalendarHeaderComponent],\n  exports: [CalendarHeaderComponent],\n})\nexport class DemoUtilsModule {}\n","<div class=\"row\">\n  <div class=\"col-md-6\">\n    <div class=\"btn-group\">\n      <div\n        class=\"btn btn-primary\"\n        mwlCalendarPreviousView\n        [view]=\"'week'\"\n        [(viewDate)]=\"viewDate\"\n      >\n        Previous\n      </div>\n      <div\n        class=\"btn btn-outline-secondary\"\n        mwlCalendarToday\n        [(viewDate)]=\"viewDate\"\n      >\n        Today\n      </div>\n      <div\n        class=\"btn btn-primary\"\n        mwlCalendarNextView\n        [view]=\"'week'\"\n        [(viewDate)]=\"viewDate\"\n      >\n        Next\n      </div>\n    </div>\n  </div>\n  <div class=\"col-md-6 text-right\">\n    <h3>{{ viewDate | calendarDate:('weekViewTitle') }}</h3>\n  </div>\n</div>\n<br />\n\n<ng-template\n  #weekViewHourSegmentTemplate\n  let-segment=\"segment\"\n  let-locale=\"locale\"\n  let-segmentHeight=\"segmentHeight\"\n  let-isTimeLabel=\"isTimeLabel\"\n>\n  <div\n    #segmentElement\n    class=\"cal-hour-segment\"\n    [style.height.px]=\"segmentHeight\"\n    [class.cal-hour-start]=\"segment.isStart\"\n    [class.cal-after-hour-start]=\"!segment.isStart\"\n    [ngClass]=\"segment.cssClass\"\n    (mousedown)=\"startDragToCreate(segment, $event, segmentElement)\"\n  >\n    <div class=\"cal-time\" *ngIf=\"isTimeLabel\">\n      {{ segment.date | calendarDate:'weekViewHour':locale }}\n    </div>\n  </div>\n</ng-template>\n\n<mwl-calendar-week-view\n  [viewDate]=\"viewDate\"\n  [events]=\"events\"\n  [hourSegmentTemplate]=\"weekViewHourSegmentTemplate\"\n  [weekStartsOn]=\"weekStartsOn\"\n>\n</mwl-calendar-week-view>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Injectable,\n  ViewEncapsulation,\n} from '@angular/core';\nimport { CalendarEvent, CalendarEventTitleFormatter } from 'angular-calendar';\nimport { WeekViewHourSegment } from 'calendar-utils';\nimport { fromEvent } from 'rxjs';\nimport { finalize, takeUntil } from 'rxjs/operators';\nimport { addDays, addMinutes, endOfWeek } from 'date-fns';\n\nfunction floorToNearest(amount: number, precision: number) {\n  return Math.floor(amount / precision) * precision;\n}\n\nfunction ceilToNearest(amount: number, precision: number) {\n  return Math.ceil(amount / precision) * precision;\n}\n\n@Injectable()\nexport class CustomEventTitleFormatter extends CalendarEventTitleFormatter {\n  weekTooltip(event: CalendarEvent, title: string) {\n    if (!event.meta.tmpEvent) {\n      return super.weekTooltip(event, title);\n    }\n  }\n\n  dayTooltip(event: CalendarEvent, title: string) {\n    if (!event.meta.tmpEvent) {\n      return super.dayTooltip(event, title);\n    }\n  }\n}\n\n@Component({\n  selector: 'mwl-demo-component',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  templateUrl: 'template.html',\n  providers: [\n    {\n      provide: CalendarEventTitleFormatter,\n      useClass: CustomEventTitleFormatter,\n    },\n  ],\n  styles: [\n    `\n      .disable-hover {\n        pointer-events: none;\n      }\n    `,\n  ],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class DemoComponent {\n  viewDate = new Date();\n\n  events: CalendarEvent[] = [];\n\n  dragToCreateActive = false;\n\n  weekStartsOn: 0 = 0;\n\n  constructor(private cdr: ChangeDetectorRef) {}\n\n  startDragToCreate(\n    segment: WeekViewHourSegment,\n    mouseDownEvent: MouseEvent,\n    segmentElement: HTMLElement\n  ) {\n    const dragToSelectEvent: CalendarEvent = {\n      id: this.events.length,\n      title: 'New event',\n      start: segment.date,\n      meta: {\n        tmpEvent: true,\n      },\n    };\n    this.events = [...this.events, dragToSelectEvent];\n    const segmentPosition = segmentElement.getBoundingClientRect();\n    this.dragToCreateActive = true;\n    const endOfView = endOfWeek(this.viewDate, {\n      weekStartsOn: this.weekStartsOn,\n    });\n\n    fromEvent(document, 'mousemove')\n      .pipe(\n        finalize(() => {\n          delete dragToSelectEvent.meta.tmpEvent;\n          this.dragToCreateActive = false;\n          this.refresh();\n        }),\n        takeUntil(fromEvent(document, 'mouseup'))\n      )\n      .subscribe((mouseMoveEvent: MouseEvent) => {\n        const minutesDiff = ceilToNearest(\n          mouseMoveEvent.clientY - segmentPosition.top,\n          30\n        );\n\n        const daysDiff =\n          floorToNearest(\n            mouseMoveEvent.clientX - segmentPosition.left,\n            segmentPosition.width\n          ) / segmentPosition.width;\n\n        const newEnd = addDays(addMinutes(segment.date, minutesDiff), daysDiff);\n        if (newEnd > segment.date && newEnd < endOfView) {\n          dragToSelectEvent.end = newEnd;\n        }\n        this.refresh();\n      });\n  }\n\n  private refresh() {\n    this.events = [...this.events];\n    this.cdr.detectChanges();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { CalendarModule, DateAdapter } from 'angular-calendar';\nimport { adapterFactory } from 'angular-calendar/date-adapters/date-fns';\nimport { DemoComponent } from './component';\nimport { DemoUtilsModule } from '../demo-utils/module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CalendarModule.forRoot({\n      provide: DateAdapter,\n      useFactory: adapterFactory,\n    }),\n    DemoUtilsModule,\n    RouterModule.forChild([{ path: '', component: DemoComponent }]),\n  ],\n  declarations: [DemoComponent],\n  exports: [DemoComponent],\n})\nexport class DemoModule {}\n"]}