{"version":3,"file":"projects_demos_app_demo-modules_drag-to-create-events_sources_ts-es2015.js","mappings":"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","sources":["./projects/demos/app/demo-modules/drag-to-create-events/sources.ts","webpack:///./projects/demos/app/demo-modules/drag-to-create-events/component.ts?39d9","webpack:///./projects/demos/app/demo-modules/drag-to-create-events/module.ts?8e2d","webpack:///./projects/demos/app/demo-modules/drag-to-create-events/template.html?0f00","webpack:///./projects/demos/app/demo-modules/drag-to-create-events/component.ts?8e4c","webpack:///./projects/demos/app/demo-modules/drag-to-create-events/module.ts?3d28","webpack:///./projects/demos/app/demo-modules/drag-to-create-events/template.html?b177"],"sourcesContent":["export const sources = [\n  {\n    filename: 'component.ts',\n    contents: {\n      raw: require('!!raw-loader!./component'),\n      highlighted: require('!!raw-loader!highlightjs-loader?lang=typescript!./component'),\n    },\n  },\n  {\n    filename: 'template.html',\n    contents: {\n      raw: require('!!raw-loader!./template.html'),\n      highlighted: require('!!raw-loader!highlightjs-loader?lang=xml!./template.html'),\n    },\n  },\n  {\n    filename: 'module.ts',\n    contents: {\n      raw: require('!!raw-loader!./module'),\n      highlighted: require('!!raw-loader!highlightjs-loader?lang=typescript!./module'),\n    },\n  },\n];\n","export default \"<span class=\\\"hljs-keyword\\\">import</span> {\\n  ChangeDetectionStrategy,\\n  ChangeDetectorRef,\\n  Component,\\n  Injectable,\\n  ViewEncapsulation,\\n} from <span class=\\\"hljs-string\\\">'@angular/core'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { CalendarEvent, CalendarEventTitleFormatter } from <span class=\\\"hljs-string\\\">'angular-calendar'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { WeekViewHourSegment } from <span class=\\\"hljs-string\\\">'calendar-utils'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { fromEvent } from <span class=\\\"hljs-string\\\">'rxjs'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { finalize, takeUntil } from <span class=\\\"hljs-string\\\">'rxjs/operators'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { addDays, addMinutes, endOfWeek } from <span class=\\\"hljs-string\\\">'date-fns'</span>;\\n\\n<span class=\\\"hljs-function\\\"><span class=\\\"hljs-keyword\\\">function</span> <span class=\\\"hljs-title\\\">floorToNearest</span>(<span class=\\\"hljs-params\\\">amount: <span class=\\\"hljs-built_in\\\">number</span>, precision: <span class=\\\"hljs-built_in\\\">number</span></span>) </span>{\\n  <span class=\\\"hljs-keyword\\\">return</span> <span class=\\\"hljs-built_in\\\">Math</span>.floor(amount / precision) * precision;\\n}\\n\\n<span class=\\\"hljs-function\\\"><span class=\\\"hljs-keyword\\\">function</span> <span class=\\\"hljs-title\\\">ceilToNearest</span>(<span class=\\\"hljs-params\\\">amount: <span class=\\\"hljs-built_in\\\">number</span>, precision: <span class=\\\"hljs-built_in\\\">number</span></span>) </span>{\\n  <span class=\\\"hljs-keyword\\\">return</span> <span class=\\\"hljs-built_in\\\">Math</span>.ceil(amount / precision) * precision;\\n}\\n\\n@Injectable()\\n<span class=\\\"hljs-keyword\\\">export</span> <span class=\\\"hljs-keyword\\\">class</span> CustomEventTitleFormatter extends CalendarEventTitleFormatter {\\n  weekTooltip(event: CalendarEvent, title: <span class=\\\"hljs-built_in\\\">string</span>) {\\n    <span class=\\\"hljs-keyword\\\">if</span> (!event.meta.tmpEvent) {\\n      <span class=\\\"hljs-keyword\\\">return</span> <span class=\\\"hljs-keyword\\\">super</span>.weekTooltip(event, title);\\n    }\\n  }\\n\\n  dayTooltip(event: CalendarEvent, title: <span class=\\\"hljs-built_in\\\">string</span>) {\\n    <span class=\\\"hljs-keyword\\\">if</span> (!event.meta.tmpEvent) {\\n      <span class=\\\"hljs-keyword\\\">return</span> <span class=\\\"hljs-keyword\\\">super</span>.dayTooltip(event, title);\\n    }\\n  }\\n}\\n\\n@Component({\\n  selector: <span class=\\\"hljs-string\\\">'mwl-demo-component'</span>,\\n  changeDetection: ChangeDetectionStrategy.OnPush,\\n  templateUrl: <span class=\\\"hljs-string\\\">'template.html'</span>,\\n  providers: [\\n    {\\n      provide: CalendarEventTitleFormatter,\\n      useClass: CustomEventTitleFormatter,\\n    },\\n  ],\\n  styles: [\\n    `\\n      .disable-hover {\\n        pointer-events: none;\\n      }\\n    `,\\n  ],\\n  encapsulation: ViewEncapsulation.None,\\n})\\n<span class=\\\"hljs-keyword\\\">export</span> <span class=\\\"hljs-keyword\\\">class</span> DemoComponent {\\n  viewDate = <span class=\\\"hljs-keyword\\\">new</span> <span class=\\\"hljs-built_in\\\">Date</span>();\\n\\n  events: CalendarEvent[] = [];\\n\\n  dragToCreateActive = <span class=\\\"hljs-literal\\\">false</span>;\\n\\n  weekStartsOn: <span class=\\\"hljs-number\\\">0</span> = <span class=\\\"hljs-number\\\">0</span>;\\n\\n  <span class=\\\"hljs-constructor\\\"><span class=\\\"hljs-keyword\\\">constructor</span>(private cdr: ChangeDetectorRef) </span>{}\\n\\n  startDragToCreate(\\n    segment: WeekViewHourSegment,\\n    mouseDownEvent: MouseEvent,\\n    segmentElement: HTMLElement\\n  ) {\\n    <span class=\\\"hljs-keyword\\\">const</span> dragToSelectEvent: CalendarEvent = {\\n      id: <span class=\\\"hljs-keyword\\\">this</span>.events.length,\\n      title: <span class=\\\"hljs-string\\\">'New event'</span>,\\n      start: segment.date,\\n      meta: {\\n        tmpEvent: <span class=\\\"hljs-literal\\\">true</span>,\\n      },\\n    };\\n    <span class=\\\"hljs-keyword\\\">this</span>.events = [...this.events, dragToSelectEvent];\\n    <span class=\\\"hljs-keyword\\\">const</span> segmentPosition = segmentElement.getBoundingClientRect();\\n    <span class=\\\"hljs-keyword\\\">this</span>.dragToCreateActive = <span class=\\\"hljs-literal\\\">true</span>;\\n    <span class=\\\"hljs-keyword\\\">const</span> endOfView = endOfWeek(<span class=\\\"hljs-keyword\\\">this</span>.viewDate, {\\n      weekStartsOn: <span class=\\\"hljs-keyword\\\">this</span>.weekStartsOn,\\n    });\\n\\n    fromEvent(<span class=\\\"hljs-built_in\\\">document</span>, <span class=\\\"hljs-string\\\">'mousemove'</span>)\\n      .pipe(\\n        finalize(() =&gt; {\\n          <span class=\\\"hljs-keyword\\\">delete</span> dragToSelectEvent.meta.tmpEvent;\\n          <span class=\\\"hljs-keyword\\\">this</span>.dragToCreateActive = <span class=\\\"hljs-literal\\\">false</span>;\\n          <span class=\\\"hljs-keyword\\\">this</span>.refresh();\\n        }),\\n        takeUntil(fromEvent(<span class=\\\"hljs-built_in\\\">document</span>, <span class=\\\"hljs-string\\\">'mouseup'</span>))\\n      )\\n      .subscribe((mouseMoveEvent: MouseEvent) =&gt; {\\n        <span class=\\\"hljs-keyword\\\">const</span> minutesDiff = ceilToNearest(\\n          mouseMoveEvent.clientY - segmentPosition.top,\\n          <span class=\\\"hljs-number\\\">30</span>\\n        );\\n\\n        <span class=\\\"hljs-keyword\\\">const</span> daysDiff =\\n          floorToNearest(\\n            mouseMoveEvent.clientX - segmentPosition.left,\\n            segmentPosition.width\\n          ) / segmentPosition.width;\\n\\n        <span class=\\\"hljs-keyword\\\">const</span> newEnd = addDays(addMinutes(segment.date, minutesDiff), daysDiff);\\n        <span class=\\\"hljs-keyword\\\">if</span> (newEnd &gt; segment.date &amp;&amp; newEnd &lt; endOfView) {\\n          dragToSelectEvent.end = newEnd;\\n        }\\n        <span class=\\\"hljs-keyword\\\">this</span>.refresh();\\n      });\\n  }\\n\\n  <span class=\\\"hljs-keyword\\\">private</span> refresh() {\\n    <span class=\\\"hljs-keyword\\\">this</span>.events = [...this.events];\\n    <span class=\\\"hljs-keyword\\\">this</span>.cdr.detectChanges();\\n  }\\n}\\n\";","export default \"<span class=\\\"hljs-keyword\\\">import</span> { NgModule } from <span class=\\\"hljs-string\\\">'@angular/core'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { CommonModule } from <span class=\\\"hljs-string\\\">'@angular/common'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { RouterModule } from <span class=\\\"hljs-string\\\">'@angular/router'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { CalendarModule, DateAdapter } from <span class=\\\"hljs-string\\\">'angular-calendar'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { adapterFactory } from <span class=\\\"hljs-string\\\">'angular-calendar/date-adapters/date-fns'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { DemoComponent } from <span class=\\\"hljs-string\\\">'./component'</span>;\\n<span class=\\\"hljs-keyword\\\">import</span> { DemoUtilsModule } from <span class=\\\"hljs-string\\\">'../demo-utils/module'</span>;\\n\\n@NgModule({\\n  imports: [\\n    CommonModule,\\n    CalendarModule.forRoot({\\n      provide: DateAdapter,\\n      useFactory: adapterFactory,\\n    }),\\n    DemoUtilsModule,\\n    RouterModule.forChild([{ path: <span class=\\\"hljs-string\\\">''</span>, component: DemoComponent }]),\\n  ],\\n  declarations: [DemoComponent],\\n  exports: [DemoComponent],\\n})\\n<span class=\\\"hljs-keyword\\\">export</span> <span class=\\\"hljs-keyword\\\">class</span> DemoModule {}\\n\";","export default \"<span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span> <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"row\\\"</span>&gt;</span>\\n  <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span> <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"col-md-6\\\"</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span> <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"btn-group\\\"</span>&gt;</span>\\n      <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span>\\n        <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"btn btn-primary\\\"</span>\\n        <span class=\\\"hljs-attribute\\\">mwlCalendarPreviousView</span>\\n        [<span class=\\\"hljs-attribute\\\">view</span>]=<span class=\\\"hljs-value\\\">\\\"'week'\\\"</span>\\n        [(<span class=\\\"hljs-attribute\\\">viewDate</span>)]=<span class=\\\"hljs-value\\\">\\\"viewDate\\\"</span>\\n      &gt;</span>\\n        Previous\\n      <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n      <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span>\\n        <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"btn btn-outline-secondary\\\"</span>\\n        <span class=\\\"hljs-attribute\\\">mwlCalendarToday</span>\\n        [(<span class=\\\"hljs-attribute\\\">viewDate</span>)]=<span class=\\\"hljs-value\\\">\\\"viewDate\\\"</span>\\n      &gt;</span>\\n        Today\\n      <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n      <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span>\\n        <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"btn btn-primary\\\"</span>\\n        <span class=\\\"hljs-attribute\\\">mwlCalendarNextView</span>\\n        [<span class=\\\"hljs-attribute\\\">view</span>]=<span class=\\\"hljs-value\\\">\\\"'week'\\\"</span>\\n        [(<span class=\\\"hljs-attribute\\\">viewDate</span>)]=<span class=\\\"hljs-value\\\">\\\"viewDate\\\"</span>\\n      &gt;</span>\\n        Next\\n      <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n  <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n  <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span> <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"col-md-6 text-right\\\"</span>&gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">h3</span>&gt;</span>{{ viewDate | calendarDate:('weekViewTitle') }}<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">h3</span>&gt;</span>\\n  <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n<span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">br</span> /&gt;</span>\\n\\n<span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">ng-template</span>\\n  #<span class=\\\"hljs-attribute\\\">weekViewHourSegmentTemplate</span>\\n  <span class=\\\"hljs-attribute\\\">let-segment</span>=<span class=\\\"hljs-value\\\">\\\"segment\\\"</span>\\n  <span class=\\\"hljs-attribute\\\">let-locale</span>=<span class=\\\"hljs-value\\\">\\\"locale\\\"</span>\\n  <span class=\\\"hljs-attribute\\\">let-segmentHeight</span>=<span class=\\\"hljs-value\\\">\\\"segmentHeight\\\"</span>\\n  <span class=\\\"hljs-attribute\\\">let-isTimeLabel</span>=<span class=\\\"hljs-value\\\">\\\"isTimeLabel\\\"</span>\\n&gt;</span>\\n  <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span>\\n    #<span class=\\\"hljs-attribute\\\">segmentElement</span>\\n    <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"cal-hour-segment\\\"</span>\\n    [<span class=\\\"hljs-attribute\\\">style.height.px</span>]=<span class=\\\"hljs-value\\\">\\\"segmentHeight\\\"</span>\\n    [<span class=\\\"hljs-attribute\\\">class.cal-hour-start</span>]=<span class=\\\"hljs-value\\\">\\\"segment.isStart\\\"</span>\\n    [<span class=\\\"hljs-attribute\\\">class.cal-after-hour-start</span>]=<span class=\\\"hljs-value\\\">\\\"!segment.isStart\\\"</span>\\n    [<span class=\\\"hljs-attribute\\\">ngClass</span>]=<span class=\\\"hljs-value\\\">\\\"segment.cssClass\\\"</span>\\n    (<span class=\\\"hljs-attribute\\\">mousedown</span>)=<span class=\\\"hljs-value\\\">\\\"startDragToCreate(segment, $event, segmentElement)\\\"</span>\\n  &gt;</span>\\n    <span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">div</span> <span class=\\\"hljs-attribute\\\">class</span>=<span class=\\\"hljs-value\\\">\\\"cal-time\\\"</span> *<span class=\\\"hljs-attribute\\\">ngIf</span>=<span class=\\\"hljs-value\\\">\\\"isTimeLabel\\\"</span>&gt;</span>\\n      {{ segment.date | calendarDate:'weekViewHour':locale }}\\n    <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n  <span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">div</span>&gt;</span>\\n<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">ng-template</span>&gt;</span>\\n\\n<span class=\\\"hljs-tag\\\">&lt;<span class=\\\"hljs-title\\\">mwl-calendar-week-view</span>\\n  [<span class=\\\"hljs-attribute\\\">viewDate</span>]=<span class=\\\"hljs-value\\\">\\\"viewDate\\\"</span>\\n  [<span class=\\\"hljs-attribute\\\">events</span>]=<span class=\\\"hljs-value\\\">\\\"events\\\"</span>\\n  [<span class=\\\"hljs-attribute\\\">hourSegmentTemplate</span>]=<span class=\\\"hljs-value\\\">\\\"weekViewHourSegmentTemplate\\\"</span>\\n  [<span class=\\\"hljs-attribute\\\">weekStartsOn</span>]=<span class=\\\"hljs-value\\\">\\\"weekStartsOn\\\"</span>\\n&gt;</span>\\n<span class=\\\"hljs-tag\\\">&lt;/<span class=\\\"hljs-title\\\">mwl-calendar-week-view</span>&gt;</span>\\n\";","export default \"import {\\n  ChangeDetectionStrategy,\\n  ChangeDetectorRef,\\n  Component,\\n  Injectable,\\n  ViewEncapsulation,\\n} from '@angular/core';\\nimport { CalendarEvent, CalendarEventTitleFormatter } from 'angular-calendar';\\nimport { WeekViewHourSegment } from 'calendar-utils';\\nimport { fromEvent } from 'rxjs';\\nimport { finalize, takeUntil } from 'rxjs/operators';\\nimport { addDays, addMinutes, endOfWeek } from 'date-fns';\\n\\nfunction floorToNearest(amount: number, precision: number) {\\n  return Math.floor(amount / precision) * precision;\\n}\\n\\nfunction ceilToNearest(amount: number, precision: number) {\\n  return Math.ceil(amount / precision) * precision;\\n}\\n\\n@Injectable()\\nexport class CustomEventTitleFormatter extends CalendarEventTitleFormatter {\\n  weekTooltip(event: CalendarEvent, title: string) {\\n    if (!event.meta.tmpEvent) {\\n      return super.weekTooltip(event, title);\\n    }\\n  }\\n\\n  dayTooltip(event: CalendarEvent, title: string) {\\n    if (!event.meta.tmpEvent) {\\n      return super.dayTooltip(event, title);\\n    }\\n  }\\n}\\n\\n@Component({\\n  selector: 'mwl-demo-component',\\n  changeDetection: ChangeDetectionStrategy.OnPush,\\n  templateUrl: 'template.html',\\n  providers: [\\n    {\\n      provide: CalendarEventTitleFormatter,\\n      useClass: CustomEventTitleFormatter,\\n    },\\n  ],\\n  styles: [\\n    `\\n      .disable-hover {\\n        pointer-events: none;\\n      }\\n    `,\\n  ],\\n  encapsulation: ViewEncapsulation.None,\\n})\\nexport class DemoComponent {\\n  viewDate = new Date();\\n\\n  events: CalendarEvent[] = [];\\n\\n  dragToCreateActive = false;\\n\\n  weekStartsOn: 0 = 0;\\n\\n  constructor(private cdr: ChangeDetectorRef) {}\\n\\n  startDragToCreate(\\n    segment: WeekViewHourSegment,\\n    mouseDownEvent: MouseEvent,\\n    segmentElement: HTMLElement\\n  ) {\\n    const dragToSelectEvent: CalendarEvent = {\\n      id: this.events.length,\\n      title: 'New event',\\n      start: segment.date,\\n      meta: {\\n        tmpEvent: true,\\n      },\\n    };\\n    this.events = [...this.events, dragToSelectEvent];\\n    const segmentPosition = segmentElement.getBoundingClientRect();\\n    this.dragToCreateActive = true;\\n    const endOfView = endOfWeek(this.viewDate, {\\n      weekStartsOn: this.weekStartsOn,\\n    });\\n\\n    fromEvent(document, 'mousemove')\\n      .pipe(\\n        finalize(() => {\\n          delete dragToSelectEvent.meta.tmpEvent;\\n          this.dragToCreateActive = false;\\n          this.refresh();\\n        }),\\n        takeUntil(fromEvent(document, 'mouseup'))\\n      )\\n      .subscribe((mouseMoveEvent: MouseEvent) => {\\n        const minutesDiff = ceilToNearest(\\n          mouseMoveEvent.clientY - segmentPosition.top,\\n          30\\n        );\\n\\n        const daysDiff =\\n          floorToNearest(\\n            mouseMoveEvent.clientX - segmentPosition.left,\\n            segmentPosition.width\\n          ) / segmentPosition.width;\\n\\n        const newEnd = addDays(addMinutes(segment.date, minutesDiff), daysDiff);\\n        if (newEnd > segment.date && newEnd < endOfView) {\\n          dragToSelectEvent.end = newEnd;\\n        }\\n        this.refresh();\\n      });\\n  }\\n\\n  private refresh() {\\n    this.events = [...this.events];\\n    this.cdr.detectChanges();\\n  }\\n}\\n\";","export default \"import { NgModule } from '@angular/core';\\nimport { CommonModule } from '@angular/common';\\nimport { RouterModule } from '@angular/router';\\nimport { CalendarModule, DateAdapter } from 'angular-calendar';\\nimport { adapterFactory } from 'angular-calendar/date-adapters/date-fns';\\nimport { DemoComponent } from './component';\\nimport { DemoUtilsModule } from '../demo-utils/module';\\n\\n@NgModule({\\n  imports: [\\n    CommonModule,\\n    CalendarModule.forRoot({\\n      provide: DateAdapter,\\n      useFactory: adapterFactory,\\n    }),\\n    DemoUtilsModule,\\n    RouterModule.forChild([{ path: '', component: DemoComponent }]),\\n  ],\\n  declarations: [DemoComponent],\\n  exports: [DemoComponent],\\n})\\nexport class DemoModule {}\\n\";","export default \"<div class=\\\"row\\\">\\n  <div class=\\\"col-md-6\\\">\\n    <div class=\\\"btn-group\\\">\\n      <div\\n        class=\\\"btn btn-primary\\\"\\n        mwlCalendarPreviousView\\n        [view]=\\\"'week'\\\"\\n        [(viewDate)]=\\\"viewDate\\\"\\n      >\\n        Previous\\n      </div>\\n      <div\\n        class=\\\"btn btn-outline-secondary\\\"\\n        mwlCalendarToday\\n        [(viewDate)]=\\\"viewDate\\\"\\n      >\\n        Today\\n      </div>\\n      <div\\n        class=\\\"btn btn-primary\\\"\\n        mwlCalendarNextView\\n        [view]=\\\"'week'\\\"\\n        [(viewDate)]=\\\"viewDate\\\"\\n      >\\n        Next\\n      </div>\\n    </div>\\n  </div>\\n  <div class=\\\"col-md-6 text-right\\\">\\n    <h3>{{ viewDate | calendarDate:('weekViewTitle') }}</h3>\\n  </div>\\n</div>\\n<br />\\n\\n<ng-template\\n  #weekViewHourSegmentTemplate\\n  let-segment=\\\"segment\\\"\\n  let-locale=\\\"locale\\\"\\n  let-segmentHeight=\\\"segmentHeight\\\"\\n  let-isTimeLabel=\\\"isTimeLabel\\\"\\n>\\n  <div\\n    #segmentElement\\n    class=\\\"cal-hour-segment\\\"\\n    [style.height.px]=\\\"segmentHeight\\\"\\n    [class.cal-hour-start]=\\\"segment.isStart\\\"\\n    [class.cal-after-hour-start]=\\\"!segment.isStart\\\"\\n    [ngClass]=\\\"segment.cssClass\\\"\\n    (mousedown)=\\\"startDragToCreate(segment, $event, segmentElement)\\\"\\n  >\\n    <div class=\\\"cal-time\\\" *ngIf=\\\"isTimeLabel\\\">\\n      {{ segment.date | calendarDate:'weekViewHour':locale }}\\n    </div>\\n  </div>\\n</ng-template>\\n\\n<mwl-calendar-week-view\\n  [viewDate]=\\\"viewDate\\\"\\n  [events]=\\\"events\\\"\\n  [hourSegmentTemplate]=\\\"weekViewHourSegmentTemplate\\\"\\n  [weekStartsOn]=\\\"weekStartsOn\\\"\\n>\\n</mwl-calendar-week-view>\\n\";"],"names":[],"sourceRoot":"webpack:///"}